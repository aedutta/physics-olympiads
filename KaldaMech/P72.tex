\begin{solution}{normal}
Note that due to the fact that the thread is extremely long,  there are no horizontal forces exerted by the string and as a result, the horizontal momentum is conserved. We have:
$$mv=(M+m)u$$
Conservation of energy then gives:
$$\frac{1}{2}mv^2 = \frac{1}{2}(M+m)u^2 = mg\ell \implies \frac{1}{2}mv^2 = \frac{1}{2}\frac{m^2v^2}{M+m}+mg\ell$$
Solving for $v$, we get:\footnote{It is good to check for limiting cases. If $m/M \to 0$, we can ignore the horizontal components of velocity and just conserve energy. We get the standard result $v=\sqrt{2g\ell}$. If $M \to \infty$, then we need to provide an infinite speed to raise the height as we stated the string is extremely long.}
$$v=\sqrt{2g\ell\left(1+m/M\right)}$$
\end{solution}
